<html>
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <canvas id="screen" width="10" height="10"></canvas>

    <script src="/socket.io/socket.io.js"></script>

    <script type="module">
      import createKetboardListener from './keyboard-listener.js'
      import createGame from './game.js'
      import renderScreen from './render-screen.js'
      
      const game = createGame();
      const keyBoardListener = createKetboardListener(document);
      keyBoardListener.subscribe(game.movePlayer);

      const screen = document.getElementById("screen");
      renderScreen(screen, game, requestAnimationFrame);

      const socket = io()

      socket.on('connect', () =>{
        const playerId = socket.Id
        console.log(`Player connected on Client With Id: ${playerId}`)

        socket.on('setup', ()=>{
          console.log('Receiving "setup" event from server')
          console.log(state)

          game.state = state
        })
      })

    </script>
  </body>
</html>
